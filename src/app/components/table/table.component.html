<h2>Result</h2>

<div style="display: flex;">
  <button style="margin-right: 10px;" mat-raised-button (click)="toggleFilterRow()">{{ showFilterRow ? 'Hide Filters' : 'Show Filters' }}</button>
  <button mat-raised-button (click)="downloadCSV()" [disabled]="this.dataSource.data.length === 0">Download CSV</button>
</div>

<div style="padding: 10px;"></div>

<div [hidden]="!showFilterRow">
  <mat-expansion-panel (opened)="panelOpenState = true"
                       (closed)="panelOpenState = false"
                       [expanded]="false">
    <mat-expansion-panel-header>
      <mat-panel-title style="font-size: 10px;">Filter</mat-panel-title>
    </mat-expansion-panel-header>
    <mat-card>
      <div>
        <mat-form-field style="padding-left: 5px; padding-right: 5px;" *ngFor="let column of displayedColumns">
          <input matInput [(ngModel)]="filterValues[column]" (input)="applyFilter()" placeholder="{{ column }}">
        </mat-form-field>
      </div>
      <div style="padding-top: 10px; text-align: right;">
        <button mat-raised-button (click)="resetFilters()">Clear Filters</button>
      </div>
    </mat-card>
  </mat-expansion-panel>
</div>

<div style="padding: 10px;"></div>

<div class="table-responsive">
  <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">
    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef>id</th>
      <td mat-cell *matCellDef="let element">{{element.id}}</td>
    </ng-container>
    <ng-container matColumnDef="creation_timestamp">
      <th mat-header-cell *matHeaderCellDef>creation_timestamp</th>
      <td mat-cell *matCellDef="let element">{{element.creationTimestamp}}</td>
    </ng-container>
    <ng-container matColumnDef="last_update_timestamp">
      <th mat-header-cell *matHeaderCellDef>last_update_timestamp</th>
      <td mat-cell *matCellDef="let element">{{element.lastUpdateTimestamp}}</td>
    </ng-container>
    <ng-container matColumnDef="column_a">
      <th mat-header-cell *matHeaderCellDef>column_a</th>
      <td mat-cell *matCellDef="let element">{{element.columnA}}</td>
    </ng-container>
    <ng-container matColumnDef="column_b">
      <th mat-header-cell *matHeaderCellDef>column_b</th>
      <td mat-cell *matCellDef="let element">{{element.columnB}}</td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
</div>


<!--<mat-card *ngIf="url">-->
<!--  <mat-card-content>-->
<!--    <div class="url-card">-->
<!--      <p><code>{{url}}</code></p>-->
<!--    </div>-->
<!--  </mat-card-content>-->
<!--</mat-card>-->

<!--<mat-card>-->
<!--  <div>-->
<!--    &lt;!&ndash; Button to toggle filter row visibility &ndash;&gt;-->
<!--    <button mat-raised-button (click)="showFilterRow = !showFilterRow">Toggle Filter Row</button>-->

<!--    <div style="padding: 20px;"></div>-->

<!--    <p>Show Filter Row: {{ showFilterRow }}</p>-->

<!--    <div style="padding: 20px;"></div>-->

<!--    <mat-table [dataSource]="responseItems">-->

<!--      &lt;!&ndash; Columns Definitions &ndash;&gt;-->
<!--      <ng-container matColumnDef="id">-->
<!--        <th mat-header-cell *matHeaderCellDef>id</th>-->
<!--        <td mat-cell *matCellDef="let element">{{element.id}}</td>-->
<!--      </ng-container>-->

<!--      <ng-container matColumnDef="creation_timestamp">-->
<!--        <th mat-header-cell *matHeaderCellDef>creation_timestamp</th>-->
<!--        <td mat-cell *matCellDef="let element">{{element.creationTimestamp}}</td>-->
<!--      </ng-container>-->

<!--      <ng-container matColumnDef="last_update_timestamp">-->
<!--        <th mat-header-cell *matHeaderCellDef>last_update_timestamp</th>-->
<!--        <td mat-cell *matCellDef="let element">{{element.lastUpdateTimestamp}}</td>-->
<!--      </ng-container>-->

<!--      <ng-container matColumnDef="column_a">-->
<!--        <th mat-header-cell *matHeaderCellDef>column_a</th>-->
<!--        <td mat-cell *matCellDef="let element">{{element.columnA}}</td>-->
<!--      </ng-container>-->

<!--      <ng-container matColumnDef="column_b">-->
<!--        <th mat-header-cell *matHeaderCellDef>column_b</th>-->
<!--        <td mat-cell *matCellDef="let element">{{element.columnB}}</td>-->
<!--      </ng-container>-->

<!--      &lt;!&ndash; Filter Row Definitions &ndash;&gt;-->
<!--      <ng-container *ngFor="let column of displayedColumns" [matColumnDef]="column + '-filter'">-->
<!--        <th mat-header-cell *matHeaderCellDef>-->
<!--          <input *ngIf="showFilterRow" (input)="applyFilter(column, $event)" placeholder="Filter">-->
<!--        </th>-->
<!--      </ng-container>-->

<!--      &lt;!&ndash; Rows Definitions &ndash;&gt;-->
<!--      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>-->

<!--&lt;!&ndash;      <tr *ngIf="showFilterRow">&ndash;&gt;-->
<!--&lt;!&ndash;        <td *ngFor="let column of displayedColumns">&ndash;&gt;-->
<!--&lt;!&ndash;          <input *ngIf="column !== 'id'" (input)="applyFilter(column, $event)" placeholder="Filter">&ndash;&gt;-->
<!--&lt;!&ndash;        </td>&ndash;&gt;-->
<!--&lt;!&ndash;      </tr>&ndash;&gt;-->
<!--      <tr *ngIf="showFilterRow">-->
<!--        <td [attr.colspan]="displayedColumns.length">-->
<!--          Filter row is here-->
<!--        </td>-->
<!--      </tr>-->

<!--      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>-->

<!--    </mat-table>-->
<!--  </div>-->
<!--</mat-card>-->
